import{r as i,j as e,u as y,a as v,b as C,c as f,g as S,d as N,i as L,B as w}from"./index-C23uZE0M.js";import{C as W}from"./Card-D0lcT4Nq.js";const k=t=>t.cars.items,E=t=>t.cars.page,P=t=>t.cars.isLoading,F=t=>t.cars.error,T="_container_mo2uy_1",M="_sectionCatalog_mo2uy_7",B="_btn_mo2uy_16",x={container:T,sectionCatalog:M,btn:B},A="_container_cyebt_1",$="_brandWrapper_cyebt_9",D="_priceWrapper_cyebt_13",O="_label_cyebt_17",R="_select_cyebt_25",I="_option_cyebt_38",H="_inputStyle_cyebt_47",K="_btn_cyebt_69",z="_inputWrapper_cyebt_85",G="_inputLabel_cyebt_90",U="_inputFrom_cyebt_96",V="_inputTo_cyebt_111",o={container:A,brandWrapper:$,priceWrapper:D,label:O,select:R,option:I,inputStyle:H,btn:K,inputWrapper:z,inputLabel:G,inputFrom:U,inputTo:V},q=["All","Buick","Volvo","HUMMER","Subaru","Mitsubishi","Nissan","Lincoln","GMC","Hyundai","MINI","Bentley","Mercedes-Benz","Aston Martin","Pontiac","Lamborghini","Audi","BMW","Chevrolet","Chrysler","Kia","Land"],J=["30","40","50","60","70","80","90","100","120","140","160","180","200"],Q="_wrapper_v3il7_1",X="_btn_v3il7_8",Y="_listWrapper_v3il7_30",Z="_list_v3il7_30",ee="_item_v3il7_50",h={wrapper:Q,btn:X,listWrapper:Y,list:Z,item:ee},te=({items:t,onSelect:r,onClose:c})=>{const a=i.useRef(null);return i.useEffect(()=>{const n=u=>{u.code==="Escape"&&c(!1)},l=u=>{a.current&&!a.current.contains(u.target)&&c(!1)};return window.addEventListener("keydown",n),document.addEventListener("mousedown",l),()=>{window.removeEventListener("keydown",n),document.addEventListener("mousedown",l)}},[c]),e.jsx("div",{className:h.listWrapper,ref:a,children:e.jsx("ul",{className:h.list,children:t.map(n=>e.jsx("li",{className:h.item,onClick:()=>r(n),children:n},n))})})},j=({items:t=[],defaultSelect:r,onSelect:c})=>{const[a,n]=i.useState(!1),[l,u]=i.useState(r),m=b=>{c(b),u(b),n(!1)};return e.jsxs("div",{className:h.wrapper,children:[e.jsxs("button",{className:h.btn,onClick:()=>n(!a),children:[l,e.jsx("svg",{width:"20",height:"20",alt:"dropdown",children:e.jsx("use",{href:"./icons.svg#icon-dropdown"})})]}),a&&e.jsx(te,{items:t,onSelect:m,onClose:()=>n(!1)})]})},se=()=>{const t=y(),[r,c]=v(),[a,n]=i.useState(r.get("price")),[l,u]=i.useState(r.get("from")),[m,b]=i.useState(r.get("to")),[s]=i.useState({make:r.get("make")??"",price:r.get("price")??"",from:r.get("from")??"",to:r.get("to")??""});for(var _ in s)s[_]||delete s[_];const g=async p=>{if(t(C()),p==="All"){delete s.make,c(s);return}s.make=p,c(s)},d=()=>{a?s.price=a:delete s.price,l?s.from=l:delete s.from,m?s.to=m:delete s.to,c(s)};return e.jsxs("div",{className:o.container,children:[e.jsxs("div",{className:o.brandWrapper,children:[e.jsx("span",{className:o.label,children:"Car brand"}),e.jsx(j,{items:q,defaultSelect:(s==null?void 0:s.make)||"Enter the text",onSelect:g})]}),e.jsxs("div",{className:o.priceWrapper,children:[e.jsx("span",{className:o.label,children:"Price/ 1 hour"}),e.jsx(j,{items:J,defaultSelect:a||"To $",onSelect:n})]}),e.jsxs("div",{children:[e.jsx("span",{className:o.label,children:"Car mileage / km"}),e.jsxs("div",{className:o.inputWrapper,children:[e.jsx("label",{className:o.inputLabel,htmlFor:"from",children:"From"}),e.jsx("input",{id:"from",className:o.inputFrom,type:"number",value:l||"",onChange:p=>u(p.target.value)})]}),e.jsxs("div",{className:o.inputWrapper,children:[e.jsx("label",{className:o.inputLabel,htmlFor:"to",children:"To"}),e.jsx("input",{id:"to",className:o.inputTo,type:"number",value:m||"",onChange:p=>b(p.target.value)})]})]}),e.jsx("button",{className:o.btn,type:"button",onClick:d,children:"Search"})]})},ne=()=>{const[t]=v(),r=t.get("make"),c=t.get("price"),a=t.get("from")??1,n=t.get("to")??999999999,l=f(k),u=f(P),m=f(E),[b,s]=i.useState([]),_=y();i.useEffect(()=>{_(S({page:m,make:r}))},[_,m,r]),i.useEffect(()=>()=>{_(C())},[_]),i.useEffect(()=>{let d=[...l];c&&(d=d.filter(p=>p.rentalPrice<=c)),a&&n&&(d=d.filter(p=>p.mileage>=a&&p.mileage<=n)),s(d)},[l,c,a,n]);const g=()=>{_(L())};return e.jsxs(e.Fragment,{children:[e.jsxs("div",{className:x.container,children:[e.jsx(se,{}),e.jsx("section",{className:x.sectionCatalog,children:b&&b.map(d=>e.jsx(W,{data:d},d.id))}),m<3&&!r&&e.jsx("button",{className:x.btn,type:"button",onClick:g,children:"Load more"})]}),u&&e.jsx(N,{})]})},ce=()=>{const t=f(F);return i.useEffect(()=>{t&&w.error("Sorry, an error occurred on our website. Please try reloading the page.")},[t]),e.jsx("main",{children:e.jsx(ne,{})})};export{ce as default};
