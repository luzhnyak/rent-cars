import{r as i,j as e,u as j,a as C,b as S,c as g,g as v,d as N,i as L,B as k}from"./index-DiT7T2xZ.js";import{C as y}from"./Card-DUA7ysn2.js";const W=t=>t.cars.items,E=t=>t.cars.page,P=t=>t.cars.isLoading,q=t=>t.cars.error,F="_container_mo2uy_1",T="_sectionCatalog_mo2uy_7",M="_btn_mo2uy_16",x={container:F,sectionCatalog:T,btn:M},B="_container_1qw2a_1",A="_brandWrapper_1qw2a_9",$="_priceWrapper_1qw2a_13",D="_label_1qw2a_17",O="_select_1qw2a_25",R="_option_1qw2a_38",I="_inputStyle_1qw2a_47",H="_btn_1qw2a_69",K="_inputWrapper_1qw2a_85",z="_inputLabel_1qw2a_90",G="_inputFrom_1qw2a_96",U="_inputTo_1qw2a_111",c={container:B,brandWrapper:A,priceWrapper:$,label:D,select:O,option:R,inputStyle:I,btn:H,inputWrapper:K,inputLabel:z,inputFrom:G,inputTo:U},V=["All","Buick","Volvo","HUMMER","Subaru","Mitsubishi","Nissan","Lincoln","GMC","Hyundai","MINI","Bentley","Mercedes-Benz","Aston Martin","Pontiac","Lamborghini","Audi","BMW","Chevrolet","Chrysler","Kia","Land"],J=["30","40","50","60","70","80","90","100","120","140","160","180","200"],Q="_wrapper_fgkw8_1",X="_btn_fgkw8_8",Y="_listWrapper_fgkw8_30",Z="_list_fgkw8_30",ee="_item_fgkw8_50",f={wrapper:Q,btn:X,listWrapper:Y,list:Z,item:ee},te=({items:t,onSelect:a,onClose:o})=>{const r=i.useRef(null);return i.useEffect(()=>{const n=u=>{u.code==="Escape"&&o(!1)},l=u=>{r.current&&!r.current.contains(u.target)&&o(!1)};return window.addEventListener("keydown",n),document.addEventListener("mousedown",l),()=>{window.removeEventListener("keydown",n),document.addEventListener("mousedown",l)}},[o]),e.jsx("div",{className:f.listWrapper,ref:r,children:e.jsx("ul",{className:f.list,children:t.map(n=>e.jsx("li",{className:f.item,onClick:()=>a(n),children:n},n))})})},w=({items:t=[],defaultSelect:a,onSelect:o})=>{const[r,n]=i.useState(!1),[l,u]=i.useState(a),m=h=>{o(h),u(h),n(!1)};return e.jsxs("div",{className:f.wrapper,children:[e.jsxs("button",{className:f.btn,onClick:()=>n(!r),children:[l,e.jsx("svg",{width:"20",height:"20",alt:"dropdown",children:e.jsx("use",{href:"./icons.svg#icon-dropdown"})})]}),r&&e.jsx(te,{items:t,onSelect:m,onClose:()=>n(!1)})]})},se=()=>{const t=j(),[a,o]=C(),[r,n]=i.useState(a.get("price")),[l,u]=i.useState(a.get("from")),[m,h]=i.useState(a.get("to")),[s]=i.useState({make:a.get("make")??"",price:a.get("price")??"",from:a.get("from")??"",to:a.get("to")??""});for(var _ in s)s[_]||delete s[_];const b=async p=>{if(t(S()),p==="All"){delete s.make,o(s);return}s.make=p,o(s)},d=()=>{r?s.price=r:delete s.price,l?s.from=l:delete s.from,m?s.to=m:delete s.to,o(s)};return e.jsxs("div",{className:c.container,children:[e.jsxs("div",{className:c.brandWrapper,children:[e.jsx("span",{className:c.label,children:"Car brand"}),e.jsx(w,{items:V,defaultSelect:(s==null?void 0:s.make)||"Enter the text",onSelect:b})]}),e.jsxs("div",{className:c.priceWrapper,children:[e.jsx("span",{className:c.label,children:"Price/ 1 hour"}),e.jsx(w,{items:J,defaultSelect:r||"To $",onSelect:n})]}),e.jsxs("div",{children:[e.jsx("span",{className:c.label,children:"Car mileage / km"}),e.jsxs("div",{className:c.inputWrapper,children:[e.jsx("label",{className:c.inputLabel,htmlFor:"from",children:"From"}),e.jsx("input",{id:"from",className:c.inputFrom,type:"number",value:l||"",onChange:p=>u(p.target.value)})]}),e.jsxs("div",{className:c.inputWrapper,children:[e.jsx("label",{className:c.inputLabel,htmlFor:"to",children:"To"}),e.jsx("input",{id:"to",className:c.inputTo,type:"number",value:m||"",onChange:p=>h(p.target.value)})]})]}),e.jsx("button",{className:c.btn,type:"button",onClick:d,children:"Search"})]})},ne=()=>{const[t]=C(),a=t.get("make"),o=t.get("price"),r=t.get("from")??1,n=t.get("to")??999999999,l=g(W),u=g(P),m=g(E),[h,s]=i.useState([]),_=j();i.useEffect(()=>{_(v({page:m,make:a}))},[_,m,a]),i.useEffect(()=>()=>{_(S())},[_]),i.useEffect(()=>{let d=[...l];o&&(d=d.filter(p=>p.rentalPrice<=o)),r&&n&&(d=d.filter(p=>p.mileage>=r&&p.mileage<=n)),s(d)},[l,o,r,n]);const b=()=>{_(L())};return e.jsxs(e.Fragment,{children:[e.jsxs("div",{className:x.container,children:[e.jsx(se,{}),e.jsx("section",{className:x.sectionCatalog,children:h&&h.map(d=>e.jsx(y,{data:d},d.id))}),m<3&&!a&&e.jsx("button",{className:x.btn,type:"button",onClick:b,children:"Load more"})]}),u&&e.jsx(N,{})]})},oe=()=>{const t=g(q);return i.useEffect(()=>{t&&k.error("Sorry, an error occurred on our website. Please try reloading the page.")},[t]),e.jsx("main",{children:e.jsx(ne,{})})};export{oe as default};
