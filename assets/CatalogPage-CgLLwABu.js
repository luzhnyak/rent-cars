import{r as p,j as e,u as j,a as v,b as w,c as g,L as N,i as k,g as W}from"./index-CWpZeFls.js";import{C as y}from"./Card-QLYTUJJn.js";const P=t=>t.cars.items,L=t=>t.cars.page,E=t=>t.cars.isLoading,F="_container_mo2uy_1",M="_sectionCatalog_mo2uy_7",T="_btn_mo2uy_16",b={container:F,sectionCatalog:M,btn:T},B="_container_xo32p_1",A="_brandWrapper_xo32p_9",$="_priceWrapper_xo32p_13",q="_label_xo32p_17",D="_select_xo32p_25",I="_option_xo32p_38",O="_inputStyle_xo32p_47",R="_btn_xo32p_69",H="_inputWrapper_xo32p_85",K="_inputLabel_xo32p_90",z="_inputFrom_xo32p_96",G="_inputTo_xo32p_115",o={container:B,brandWrapper:A,priceWrapper:$,label:q,select:D,option:I,inputStyle:O,btn:R,inputWrapper:H,inputLabel:K,inputFrom:z,inputTo:G},U=["All","Buick","Volvo","HUMMER","Subaru","Mitsubishi","Nissan","Lincoln","GMC","Hyundai","MINI","Bentley","Mercedes-Benz","Aston Martin","Pontiac","Lamborghini","Audi","BMW","Chevrolet","Chrysler","Kia","Land"],V=["30","40","50","60","70","80","90","100","120","140","160","180","200"],J="_wrapper_1h9qj_1",Q="_btn_1h9qj_8",X="_listWrapper_1h9qj_20",Y="_list_1h9qj_20",Z="_item_1h9qj_40",_={wrapper:J,btn:Q,listWrapper:X,list:Y,item:Z},ee="data:image/svg+xml,%3csvg%20width='12'%20height='8'%20viewBox='0%200%2012%208'%20fill='none'%20xmlns='http://www.w3.org/2000/svg'%3e%3cpath%20d='M1%206.5L6%201.5L11%206.5'%20stroke='%23121417'%20stroke-width='2'%20stroke-linecap='round'%20stroke-linejoin='round'/%3e%3c/svg%3e",te=({items:t,onSelect:r,onClose:c})=>{const a=p.useRef(null);return p.useEffect(()=>{const n=d=>{d.code==="Escape"&&c(!1)},i=d=>{a.current&&!a.current.contains(d.target)&&c(!1)};return window.addEventListener("keydown",n),document.addEventListener("mousedown",i),()=>{window.removeEventListener("keydown",n),document.addEventListener("mousedown",i)}},[c]),e.jsx("div",{className:_.listWrapper,ref:a,children:e.jsx("ul",{className:_.list,children:t.map(n=>e.jsx("li",{className:_.item,onClick:()=>r(n),children:n},n))})})},S=({items:t=[],defaultSelect:r,onSelect:c})=>{const[a,n]=p.useState(!1),[i,d]=p.useState(r),u=h=>{c(h),d(h),n(!1)};return e.jsxs("div",{className:_.wrapper,children:[e.jsxs("button",{className:_.btn,onClick:()=>n(!a),children:[i,e.jsx("img",{src:ee,alt:"dropdown"})]}),a&&e.jsx(te,{items:t,onSelect:u,onClose:()=>n(!1)})]})},se=()=>{const t=j(),[r,c]=v(),[a,n]=p.useState(r.get("price")),[i,d]=p.useState(r.get("from")),[u,h]=p.useState(r.get("to")),[s,C]=p.useState({make:r.get("make")??"",price:r.get("price")??"",from:r.get("from")??"",to:r.get("to")??""});for(var x in s)s[x]||delete s[x];const f=async l=>{if(t(w()),l==="All"){delete s.make,c(s);return}s.make=l,c(s)},m=()=>{a?s.price=a:delete s.price,i?s.from=i:delete s.from,u?s.to=u:delete s.to,c(s)};return e.jsxs("div",{className:o.container,children:[e.jsxs("div",{className:o.brandWrapper,children:[e.jsx("span",{className:o.label,children:"Car brand"}),e.jsx(S,{items:U,defaultSelect:(s==null?void 0:s.make)||"Enter the text",onSelect:f})]}),e.jsxs("div",{className:o.priceWrapper,children:[e.jsx("span",{className:o.label,children:"Price/ 1 hour"}),e.jsx(S,{items:V,defaultSelect:a||"To $",onSelect:n})]}),e.jsxs("div",{children:[e.jsx("span",{className:o.label,children:"Car mileage / km"}),e.jsxs("div",{className:o.inputWrapper,children:[e.jsx("label",{className:o.inputLabel,htmlFor:"from",children:"From"}),e.jsx("input",{id:"from",className:o.inputFrom,type:"number",value:i||"",onChange:l=>d(l.target.value)})]}),e.jsxs("div",{className:o.inputWrapper,children:[e.jsx("label",{className:o.inputLabel,htmlFor:"to",children:"To"}),e.jsx("input",{id:"to",className:o.inputTo,type:"number",value:u||"",onChange:l=>h(l.target.value)})]})]}),e.jsx("button",{className:o.btn,type:"button",onClick:m,children:"Search"})]})},ne=()=>{const[t,r]=v(),c=t.get("make"),a=t.get("price"),n=t.get("from"),i=t.get("to"),d=g(P),u=g(E),h=g(L),[s,C]=p.useState([]),x=j();p.useEffect(()=>{let m=[...d];a&&(m=m.filter(l=>l.rentalPrice<=a)),n&&i&&(m=m.filter(l=>l.mileage>=n&&l.mileage<=i)),C(m)},[d,a,n,i]);const f=()=>{x(k())};return e.jsxs(e.Fragment,{children:[e.jsxs("div",{className:b.container,children:[e.jsx(se,{}),e.jsx("section",{className:b.sectionCatalog,children:s&&s.map(m=>e.jsx(y,{data:m},m.id))}),h<3&&!c&&e.jsx("button",{className:b.btn,type:"button",onClick:f,children:"Load more"})]}),u&&e.jsx(N,{})]})},oe=()=>{const t=j(),[r,c]=v(),a=g(L),n=r.get("make")??"";return p.useEffect(()=>(t(W({page:a,make:n})),()=>t(w())),[t,a,n]),e.jsx("main",{children:e.jsx(ne,{})})};export{oe as default};
