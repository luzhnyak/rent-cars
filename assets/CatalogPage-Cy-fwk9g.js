import{r as i,j as e,u as v,a as y,b as C,c as g,g as S,L as N,i as L}from"./index-DL3din6t.js";import{C as w}from"./Card-C2ROZLdN.js";const W="_container_mo2uy_1",k="_sectionCatalog_mo2uy_7",E="_btn_mo2uy_16",x={container:W,sectionCatalog:k,btn:E},P=s=>s.cars.items,F=s=>s.cars.page,T=s=>s.cars.isLoading,M="_container_cyebt_1",A="_brandWrapper_cyebt_9",B="_priceWrapper_cyebt_13",$="_label_cyebt_17",D="_select_cyebt_25",O="_option_cyebt_38",R="_inputStyle_cyebt_47",I="_btn_cyebt_69",H="_inputWrapper_cyebt_85",K="_inputLabel_cyebt_90",z="_inputFrom_cyebt_96",G="_inputTo_cyebt_111",o={container:M,brandWrapper:A,priceWrapper:B,label:$,select:D,option:O,inputStyle:R,btn:I,inputWrapper:H,inputLabel:K,inputFrom:z,inputTo:G},U=["All","Buick","Volvo","HUMMER","Subaru","Mitsubishi","Nissan","Lincoln","GMC","Hyundai","MINI","Bentley","Mercedes-Benz","Aston Martin","Pontiac","Lamborghini","Audi","BMW","Chevrolet","Chrysler","Kia","Land"],V=["30","40","50","60","70","80","90","100","120","140","160","180","200"],q="_wrapper_1776v_1",J="_btn_1776v_8",Q="_listWrapper_1776v_30",X="_list_1776v_30",Y="_item_1776v_50",h={wrapper:q,btn:J,listWrapper:Q,list:X,item:Y},Z=({items:s,onSelect:a,onClose:c})=>{const r=i.useRef(null);return i.useEffect(()=>{const n=u=>{u.code==="Escape"&&c(!1)},l=u=>{r.current&&!r.current.contains(u.target)&&c(!1)};return window.addEventListener("keydown",n),document.addEventListener("mousedown",l),()=>{window.removeEventListener("keydown",n),document.addEventListener("mousedown",l)}},[c]),e.jsx("div",{className:h.listWrapper,ref:r,children:e.jsx("ul",{className:h.list,children:s.map(n=>e.jsx("li",{className:h.item,onClick:()=>a(n),children:n},n))})})},j=({items:s=[],defaultSelect:a,onSelect:c})=>{const[r,n]=i.useState(!1),[l,u]=i.useState(a),m=b=>{c(b),u(b),n(!1)};return e.jsxs("div",{className:h.wrapper,children:[e.jsxs("button",{className:h.btn,onClick:()=>n(!r),children:[l,e.jsx("svg",{width:"20",height:"20",alt:"dropdown",children:e.jsx("use",{href:"icons.svg#icon-dropdown"})})]}),r&&e.jsx(Z,{items:s,onSelect:m,onClose:()=>n(!1)})]})},ee=()=>{const s=v(),[a,c]=y(),[r,n]=i.useState(a.get("price")),[l,u]=i.useState(a.get("from")),[m,b]=i.useState(a.get("to")),[t]=i.useState({make:a.get("make")??"",price:a.get("price")??"",from:a.get("from")??"",to:a.get("to")??""});for(var _ in t)t[_]||delete t[_];const f=async p=>{if(s(C()),p==="All"){delete t.make,c(t);return}t.make=p,c(t)},d=()=>{r?t.price=r:delete t.price,l?t.from=l:delete t.from,m?t.to=m:delete t.to,c(t)};return e.jsxs("div",{className:o.container,children:[e.jsxs("div",{className:o.brandWrapper,children:[e.jsx("span",{className:o.label,children:"Car brand"}),e.jsx(j,{items:U,defaultSelect:(t==null?void 0:t.make)||"Enter the text",onSelect:f})]}),e.jsxs("div",{className:o.priceWrapper,children:[e.jsx("span",{className:o.label,children:"Price/ 1 hour"}),e.jsx(j,{items:V,defaultSelect:r||"To $",onSelect:n})]}),e.jsxs("div",{children:[e.jsx("span",{className:o.label,children:"Car mileage / km"}),e.jsxs("div",{className:o.inputWrapper,children:[e.jsx("label",{className:o.inputLabel,htmlFor:"from",children:"From"}),e.jsx("input",{id:"from",className:o.inputFrom,type:"number",value:l||"",onChange:p=>u(p.target.value)})]}),e.jsxs("div",{className:o.inputWrapper,children:[e.jsx("label",{className:o.inputLabel,htmlFor:"to",children:"To"}),e.jsx("input",{id:"to",className:o.inputTo,type:"number",value:m||"",onChange:p=>b(p.target.value)})]})]}),e.jsx("button",{className:o.btn,type:"button",onClick:d,children:"Search"})]})},te=()=>{const[s]=y(),a=s.get("make"),c=s.get("price"),r=s.get("from"),n=s.get("to"),l=g(P),u=g(T),m=g(F),[b,t]=i.useState([]),_=v();i.useEffect(()=>{_(S({page:m,make:a}))},[_,m,a]),i.useEffect(()=>()=>{_(C())},[_]),i.useEffect(()=>{let d=[...l];c&&(d=d.filter(p=>p.rentalPrice<=c)),r&&n&&(d=d.filter(p=>p.mileage>=r&&p.mileage<=n)),t(d)},[l,c,r,n]);const f=()=>{_(L())};return e.jsxs(e.Fragment,{children:[e.jsxs("div",{className:x.container,children:[e.jsx(ee,{}),e.jsx("section",{className:x.sectionCatalog,children:b&&b.map(d=>e.jsx(w,{data:d},d.id))}),m<3&&!a&&e.jsx("button",{className:x.btn,type:"button",onClick:f,children:"Load more"})]}),u&&e.jsx(N,{})]})},ae=()=>e.jsx("main",{children:e.jsx(te,{})});export{ae as default};
