import{R as N,r as o,j as e,u as j,a as S,b as C,c as g,g as k,d as v,i as L,B as y}from"./index-BHwrV2qN.js";import{I as W,C as E}from"./Card-BQNKe9uB.js";const P=s=>s.cars.items,q=s=>s.cars.page,F=s=>s.cars.isLoading,T=s=>s.cars.error,M="_container_mo2uy_1",R="_sectionCatalog_mo2uy_7",A="_btn_mo2uy_16",x={container:M,sectionCatalog:R,btn:A},B="_container_1qw2a_1",$="_brandWrapper_1qw2a_9",I="_priceWrapper_1qw2a_13",D="_label_1qw2a_17",O="_select_1qw2a_25",H="_option_1qw2a_38",K="_inputStyle_1qw2a_47",z="_btn_1qw2a_69",G="_inputWrapper_1qw2a_85",U="_inputLabel_1qw2a_90",V="_inputFrom_1qw2a_96",J="_inputTo_1qw2a_111",d={container:B,brandWrapper:$,priceWrapper:I,label:D,select:O,option:H,inputStyle:K,btn:z,inputWrapper:G,inputLabel:U,inputFrom:V,inputTo:J},Q=["All","Buick","Volvo","HUMMER","Subaru","Mitsubishi","Nissan","Lincoln","GMC","Hyundai","MINI","Bentley","Mercedes-Benz","Aston Martin","Pontiac","Lamborghini","Audi","BMW","Chevrolet","Chrysler","Kia","Land"],X=["30","40","50","60","70","80","90","100","120","140","160","180","200"],Y="_wrapper_fgkw8_1",Z="_btn_fgkw8_8",ee="_listWrapper_fgkw8_30",te="_list_fgkw8_30",se="_item_fgkw8_50",h={wrapper:Y,btn:Z,listWrapper:ee,list:te,item:se},ne=N.forwardRef(({items:s,onSelect:n,onClose:c},i)=>{const l=o.useRef(null);return o.useEffect(()=>{const a=r=>{r.code==="Escape"&&c(!1)},m=r=>{l.current&&!l.current.contains(r.target)&&i.current&&!i.current.contains(r.target)&&c(!1)};return window.addEventListener("keydown",a),document.addEventListener("mousedown",m),()=>{window.removeEventListener("keydown",a),document.removeEventListener("mousedown",m)}},[c]),e.jsx("div",{className:h.listWrapper,ref:l,children:e.jsx("ul",{className:h.list,children:s.map(a=>e.jsx("li",{className:h.item,onClick:()=>n(a),children:a},a))})})}),w=({items:s=[],defaultSelect:n,onSelect:c})=>{const[i,l]=o.useState(!1),[a,m]=o.useState(n),r=o.useRef(null),f=t=>{c(t),m(t),l(!1)};return e.jsxs("div",{className:h.wrapper,children:[e.jsxs("button",{className:h.btn,onClick:()=>{l(!i)},ref:r,children:[a,e.jsx(W,{id:"icon-dropdown",width:"20",height:"20"})]}),i&&e.jsx(ne,{items:s,onSelect:f,onClose:()=>l(!1),ref:r})]})},ae=()=>{const s=j(),[n,c]=S(),[i,l]=o.useState(n.get("price")),[a,m]=o.useState(n.get("from")),[r,f]=o.useState(n.get("to")),[t]=o.useState({make:n.get("make")??"",price:n.get("price")??"",from:n.get("from")??"",to:n.get("to")??""});for(var _ in t)t[_]||delete t[_];const b=async p=>{if(!(!t.make&&p==="All")&&t.make!==p){if(s(C()),p==="All"){delete t.make,c(t);return}t.make=p,c(t)}},u=()=>{i?t.price=i:delete t.price,a?t.from=a:delete t.from,r?t.to=r:delete t.to,c(t)};return e.jsxs("div",{className:d.container,children:[e.jsxs("div",{className:d.brandWrapper,children:[e.jsx("span",{className:d.label,children:"Car brand"}),e.jsx(w,{items:Q,defaultSelect:(t==null?void 0:t.make)||"Select brand",onSelect:b})]}),e.jsxs("div",{className:d.priceWrapper,children:[e.jsx("span",{className:d.label,children:"Price/ 1 hour"}),e.jsx(w,{items:X,defaultSelect:i||"To $",onSelect:l})]}),e.jsxs("div",{children:[e.jsx("span",{className:d.label,children:"Car mileage / km"}),e.jsxs("div",{className:d.inputWrapper,children:[e.jsx("label",{className:d.inputLabel,htmlFor:"from",children:"From"}),e.jsx("input",{id:"from",className:d.inputFrom,type:"number",value:a||"",onChange:p=>m(p.target.value)})]}),e.jsxs("div",{className:d.inputWrapper,children:[e.jsx("label",{className:d.inputLabel,htmlFor:"to",children:"To"}),e.jsx("input",{id:"to",className:d.inputTo,type:"number",value:r||"",onChange:p=>f(p.target.value)})]})]}),e.jsx("button",{className:d.btn,type:"button",onClick:u,children:"Search"})]})},re=()=>{const[s]=S(),n=s.get("make"),c=s.get("price"),i=s.get("from")??1,l=s.get("to")??999999999,a=g(P),m=g(F),r=g(q),[f,t]=o.useState([]),_=j();o.useEffect(()=>{_(k({page:r,make:n}))},[_,r,n]),o.useEffect(()=>()=>{_(C())},[_]),o.useEffect(()=>{let u=[...a];c&&(u=u.filter(p=>p.rentalPrice<=c)),i&&l&&(u=u.filter(p=>p.mileage>=i&&p.mileage<=l)),t(u)},[a,c,i,l]);const b=()=>{_(L())};return e.jsxs(e.Fragment,{children:[e.jsxs("div",{className:x.container,children:[e.jsx(ae,{}),e.jsx("section",{className:x.sectionCatalog,children:f&&f.map(u=>e.jsx(E,{data:u},u.id))}),r<3&&!n&&e.jsx("button",{className:x.btn,type:"button",onClick:b,children:"Load more"})]}),m&&e.jsx(v,{})]})},ie=()=>{const s=g(T);return o.useEffect(()=>{s&&y.error("Sorry, an error occurred on our website. Please try reloading the page.")},[s]),e.jsx("main",{children:e.jsx(re,{})})};export{ie as default};
